{% extends "base.html" %}
{% load i18n %}

{% block content %}
Если у вас включена возможность геолокации, маркер на карте покажет где вы сейчас находитесь

<div id="map">

</div>

<script>
      function initMap(){
          var element = document.getElementById('map');
          var options = {
              zoom:12,
              center:{
                lat:59.93863, lng:30.31413
              }
          };

          var map = new google.maps.Map(element,options);

          var infoWindow = new google.maps.InfoWindow({map: map});

          var marker = null;

           // Try HTML5 geolocation.
           if (navigator.geolocation) {
             navigator.geolocation.getCurrentPosition(function(position) {
               var pos = {
                 lat: position.coords.latitude,
                 lng: position.coords.longitude
               };

               infoWindow.setPosition(pos);
               infoWindow.setContent('Вот вы где');
               map.setCenter(pos);

               marker = new google.maps.Marker(
                   {
                     position:pos,
                     map: map,
                   });

              setPosUp(pos);




             }, function() {
               handleLocationError(true, infoWindow, map.getCenter());
             });
           } else {
             // Browser doesn't support Geolocation
             handleLocationError(false, infoWindow, map.getCenter());
           }
         }

         function handleLocationError(browserHasGeolocation, infoWindow, pos) {
           infoWindow.setPosition(pos);
           infoWindow.setContent(browserHasGeolocation ?
                                 'Error: The Geolocation service failed.' :
                                 'Error: Your browser doesn\'t support geolocation.');
         }

</script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAjST-98VH5P3tlhqSDwRgCwNnaCxH0f8o&callback=initMap">
  </script>


{% endblock %}
